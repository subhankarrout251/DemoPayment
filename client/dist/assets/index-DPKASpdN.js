import{r as j,a as V,L as S,u as H,b as J,B as K,R as ee,c as L,d as te}from"./vendor-Bc5lAM0u.js";import{a as q}from"./utils-NIGUFBhG.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function u(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=u(c);fetch(c.href,d)}})();var W={exports:{}},z={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var se=j,re=Symbol.for("react.element"),ae=Symbol.for("react.fragment"),oe=Object.prototype.hasOwnProperty,ne=se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,le={key:!0,ref:!0,__self:!0,__source:!0};function G(l,n,u){var i,c={},d=null,f=null;u!==void 0&&(d=""+u),n.key!==void 0&&(d=""+n.key),n.ref!==void 0&&(f=n.ref);for(i in n)oe.call(n,i)&&!le.hasOwnProperty(i)&&(c[i]=n[i]);if(l&&l.defaultProps)for(i in n=l.defaultProps,n)c[i]===void 0&&(c[i]=n[i]);return{$$typeof:re,type:l,key:d,ref:f,props:c,_owner:ne.current}}z.Fragment=ae;z.jsx=G;z.jsxs=G;W.exports=z;var e=W.exports,X,Y=V;X=Y.createRoot,Y.hydrateRoot;const Z=j.createContext(),ie=(l,n)=>{switch(n.type){case"ADD_TO_CART":return l.items.find(i=>i.id===n.payload.id)?{...l,items:l.items.map(i=>i.id===n.payload.id?{...i,qty:i.qty+1}:i)}:{...l,items:[...l.items,{...n.payload,qty:1}]};case"REMOVE_FROM_CART":return{...l,items:l.items.filter(i=>i.id!==n.payload)};case"UPDATE_QTY":return{...l,items:l.items.map(i=>i.id===n.payload.id?{...i,qty:Math.max(1,n.payload.qty)}:i)};case"CLEAR_CART":return{...l,items:[]};default:return l}},ce=({children:l})=>{const[n,u]=j.useReducer(ie,{items:[]}),i=t=>{u({type:"ADD_TO_CART",payload:t})},c=t=>{u({type:"REMOVE_FROM_CART",payload:t})},d=(t,r)=>{u({type:"UPDATE_QTY",payload:{id:t,qty:r}})},f=()=>{u({type:"CLEAR_CART"})},w=()=>n.items.reduce((t,r)=>t+r.price*r.qty,0),s=()=>n.items.reduce((t,r)=>t+r.qty,0);return e.jsx(Z.Provider,{value:{items:n.items,addToCart:i,removeFromCart:c,updateQuantity:d,clearCart:f,getCartTotal:w,getCartItemsCount:s},children:l})},_=()=>{const l=j.useContext(Z);if(!l)throw new Error("useCart must be used within a CartProvider");return l};function de(){const{getCartItemsCount:l}=_();return e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsx(S,{to:"/",className:"text-xl font-bold text-blue-600",children:"Coaching Centre"}),e.jsxs("nav",{className:"flex items-center space-x-6",children:[e.jsx(S,{to:"/",className:"text-gray-700 hover:text-blue-600 font-medium",children:"Home"}),e.jsx(S,{to:"/shop?category=40",className:"text-gray-700 hover:text-blue-600 font-medium",children:"Shop"}),e.jsx(S,{to:"/admission",className:"text-gray-700 hover:text-blue-600 font-medium",children:"Admission"}),e.jsx(S,{to:"/admin",className:"text-gray-700 hover:text-blue-600 font-medium",children:"Admin"}),e.jsxs(S,{to:"/cart",className:"relative text-gray-700 hover:text-blue-600",children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),l()>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:l()})]})]})]})})}function ue(){return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Welcome to Our Coaching Centre"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Quality education with comprehensive study materials and expert guidance for your academic success."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(S,{to:"/shop?category=40",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:"Browse Study Materials"}),e.jsx(S,{to:"/admission",className:"border border-blue-600 text-blue-600 hover:bg-blue-50 px-6 py-3 rounded-lg font-medium",children:"Apply for Admission"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 py-12",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("div",{className:"text-blue-600 text-3xl mb-4",children:"ðŸ“š"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Quality Study Materials"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive notes and books curated by experts to help you excel in your studies."})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("div",{className:"text-blue-600 text-3xl mb-4",children:"ðŸŽ“"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Expert Faculty"}),e.jsx("p",{className:"text-gray-600",children:"Learn from experienced teachers who are dedicated to your academic success."})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsx("div",{className:"text-blue-600 text-3xl mb-4",children:"ðŸ’»"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Modern Learning"}),e.jsx("p",{className:"text-gray-600",children:"Access digital resources and interactive sessions for a complete learning experience."})]})]})]})}const O="https://server-c334c62ax-subhankar-rout.vercel.app";async function F(l){if(!l.ok){const n=await l.text().catch(()=>"");throw new Error(`API ${l.status}: ${n||l.statusText}`)}return l.json()}async function me(l){const n=new URL(`${O}/api/books`);l&&n.searchParams.set("category",String(l));const u=await fetch(n.toString());return(await F(u)).data||[]}async function he(l){const n=await fetch(`${O}/api/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});return(await F(n)).data}async function xe(l){const n=await fetch(`${O}/api/admissions`,{method:"POST",body:l});return(await F(n)).data}const ge="https://server-c334c62ax-subhankar-rout.vercel.app";function pe({book:l,onAdd:n}){const u=()=>{n(l);const c=document.createElement("div");c.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300",c.innerHTML=`
      <div class="flex items-center space-x-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        <span>Added to cart successfully!</span>
      </div>
    `,document.body.appendChild(c),setTimeout(()=>{c.style.transform="translateX(0)"},10),setTimeout(()=>{c.style.transform="translateX(100%)",setTimeout(()=>{document.body.contains(c)&&document.body.removeChild(c)},300)},3e3)},i=l.cover?l.cover.startsWith("http")?l.cover:`${ge}/${l.cover}`:"/api/placeholder/300/400";return e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx("img",{src:i,alt:l.title,className:"w-full h-48 object-cover",onError:c=>{c.target.src="/api/placeholder/300/400"}}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 text-gray-900",children:l.title}),e.jsxs("p",{className:"text-blue-600 font-bold text-xl mb-4",children:["â‚¹",l.price]}),e.jsx("button",{onClick:u,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md font-medium transition-colors",children:"Add to Cart"})]})]})}function fe(){const[l,n]=j.useState([]),[u,i]=j.useState(!0),[c]=H(),d=c.get("category")||"",{addToCart:f}=_();j.useEffect(()=>{i(!0),me(d).then(t=>{n(t),i(!1)}).catch(t=>{console.error("Error fetching books:",t),i(!1)})},[d]);const[w,s]=j.useState([{id:"",name:"All"},{id:"40",name:"Class 11-12"},{id:"30",name:"Competitive Exams"},{id:"20",name:"Foundation Courses"}]);return j.useEffect(()=>{(async()=>{try{const a=await(await fetch("https://server-c334c62ax-subhankar-rout.vercel.app/api/books")).json();if(a.ok){const o=[...new Set(a.data.map(m=>m.category).filter(Boolean))],h=[{id:"",name:"All"},{id:"40",name:"Class 11-12"},{id:"30",name:"Competitive Exams"},{id:"20",name:"Foundation Courses"},...o.map(m=>({id:m,name:m}))];s(h)}}catch(r){console.error("Error fetching categories:",r)}})()},[]),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4 md:mb-0",children:"Study Materials Shop"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(t=>e.jsx("a",{href:t.id?`/shop?category=${t.id}`:"/shop",className:`px-4 py-2 rounded-full text-sm font-medium ${d===t.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:t.name},t.id||"all"))})]}),u?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(t=>e.jsx(pe,{book:t,onAdd:()=>f(t)},t.id))}),!u&&l.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"No books available in this category."})})]})}function ye(){const{items:l,updateQuantity:n,removeFromCart:u,getCartTotal:i,clearCart:c}=_();return l.length===0?e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your Cart is Empty"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Add some study materials to get started!"}),e.jsx(S,{to:"/shop?category=40",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:"Browse Products"})]})}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Shopping Cart"}),e.jsx("button",{onClick:c,className:"text-red-600 hover:text-red-800 font-medium",children:"Clear Cart"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[l.map(d=>e.jsx("div",{className:"border-b last:border-b-0 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:d.cover,alt:d.title,className:"w-20 h-28 object-cover rounded-lg"}),e.jsxs("div",{className:"ml-6 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d.title}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["â‚¹",d.price]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>n(d.id,d.qty-1),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:"-"}),e.jsx("span",{className:"w-8 text-center",children:d.qty}),e.jsx("button",{onClick:()=>n(d.id,d.qty+1),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",children:"+"})]}),e.jsx("div",{className:"ml-6",children:e.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["â‚¹",d.price*d.qty]})}),e.jsx("button",{onClick:()=>u(d.id),className:"ml-6 text-red-600 hover:text-red-800",children:"Remove"})]})},d.id)),e.jsxs("div",{className:"p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between items-center text-lg font-medium text-gray-900",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["â‚¹",i()]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(S,{to:"/checkout",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-medium text-center block",children:"Proceed to Checkout"})})]})]})]})}/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var P;(l=>{const n=class{constructor(s,t,r,a){if(this.version=s,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],s<n.MIN_VERSION||s>n.MAX_VERSION)throw new RangeError("Version value out of range");if(a<-1||a>7)throw new RangeError("Mask value out of range");this.size=s*4+17;let o=[];for(let m=0;m<this.size;m++)o.push(!1);for(let m=0;m<this.size;m++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();const h=this.addEccAndInterleave(r);if(this.drawCodewords(h),a==-1){let m=1e9;for(let x=0;x<8;x++){this.applyMask(x),this.drawFormatBits(x);const g=this.getPenaltyScore();g<m&&(a=x,m=g),this.applyMask(x)}}d(0<=a&&a<=7),this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}static encodeText(s,t){const r=l.QrSegment.makeSegments(s);return n.encodeSegments(r,t)}static encodeBinary(s,t){const r=l.QrSegment.makeBytes(s);return n.encodeSegments([r],t)}static encodeSegments(s,t,r=1,a=40,o=-1,h=!0){if(!(n.MIN_VERSION<=r&&r<=a&&a<=n.MAX_VERSION)||o<-1||o>7)throw new RangeError("Invalid value");let m,x;for(m=r;;m++){const b=n.getNumDataCodewords(m,t)*8,p=w.getTotalBits(s,m);if(p<=b){x=p;break}if(m>=a)throw new RangeError("Data too long")}for(const b of[n.Ecc.MEDIUM,n.Ecc.QUARTILE,n.Ecc.HIGH])h&&x<=n.getNumDataCodewords(m,b)*8&&(t=b);let g=[];for(const b of s){i(b.mode.modeBits,4,g),i(b.numChars,b.mode.numCharCountBits(m),g);for(const p of b.getData())g.push(p)}d(g.length==x);const E=n.getNumDataCodewords(m,t)*8;d(g.length<=E),i(0,Math.min(4,E-g.length),g),i(0,(8-g.length%8)%8,g),d(g.length%8==0);for(let b=236;g.length<E;b^=253)i(b,8,g);let v=[];for(;v.length*8<g.length;)v.push(0);return g.forEach((b,p)=>v[p>>>3]|=b<<7-(p&7)),new n(m,t,v,o)}getModule(s,t){return 0<=s&&s<this.size&&0<=t&&t<this.size&&this.modules[t][s]}getModules(){return this.modules}drawFunctionPatterns(){for(let r=0;r<this.size;r++)this.setFunctionModule(6,r,r%2==0),this.setFunctionModule(r,6,r%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const s=this.getAlignmentPatternPositions(),t=s.length;for(let r=0;r<t;r++)for(let a=0;a<t;a++)r==0&&a==0||r==0&&a==t-1||r==t-1&&a==0||this.drawAlignmentPattern(s[r],s[a]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(s){const t=this.errorCorrectionLevel.formatBits<<3|s;let r=t;for(let o=0;o<10;o++)r=r<<1^(r>>>9)*1335;const a=(t<<10|r)^21522;d(a>>>15==0);for(let o=0;o<=5;o++)this.setFunctionModule(8,o,c(a,o));this.setFunctionModule(8,7,c(a,6)),this.setFunctionModule(8,8,c(a,7)),this.setFunctionModule(7,8,c(a,8));for(let o=9;o<15;o++)this.setFunctionModule(14-o,8,c(a,o));for(let o=0;o<8;o++)this.setFunctionModule(this.size-1-o,8,c(a,o));for(let o=8;o<15;o++)this.setFunctionModule(8,this.size-15+o,c(a,o));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let s=this.version;for(let r=0;r<12;r++)s=s<<1^(s>>>11)*7973;const t=this.version<<12|s;d(t>>>18==0);for(let r=0;r<18;r++){const a=c(t,r),o=this.size-11+r%3,h=Math.floor(r/3);this.setFunctionModule(o,h,a),this.setFunctionModule(h,o,a)}}drawFinderPattern(s,t){for(let r=-4;r<=4;r++)for(let a=-4;a<=4;a++){const o=Math.max(Math.abs(a),Math.abs(r)),h=s+a,m=t+r;0<=h&&h<this.size&&0<=m&&m<this.size&&this.setFunctionModule(h,m,o!=2&&o!=4)}}drawAlignmentPattern(s,t){for(let r=-2;r<=2;r++)for(let a=-2;a<=2;a++)this.setFunctionModule(s+a,t+r,Math.max(Math.abs(a),Math.abs(r))!=1)}setFunctionModule(s,t,r){this.modules[t][s]=r,this.isFunction[t][s]=!0}addEccAndInterleave(s){const t=this.version,r=this.errorCorrectionLevel;if(s.length!=n.getNumDataCodewords(t,r))throw new RangeError("Invalid argument");const a=n.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][t],o=n.ECC_CODEWORDS_PER_BLOCK[r.ordinal][t],h=Math.floor(n.getNumRawDataModules(t)/8),m=a-h%a,x=Math.floor(h/a);let g=[];const E=n.reedSolomonComputeDivisor(o);for(let b=0,p=0;b<a;b++){let C=s.slice(p,p+x-o+(b<m?0:1));p+=C.length;const k=n.reedSolomonComputeRemainder(C,E);b<m&&C.push(0),g.push(C.concat(k))}let v=[];for(let b=0;b<g[0].length;b++)g.forEach((p,C)=>{(b!=x-o||C>=m)&&v.push(p[b])});return d(v.length==h),v}drawCodewords(s){if(s.length!=Math.floor(n.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let r=this.size-1;r>=1;r-=2){r==6&&(r=5);for(let a=0;a<this.size;a++)for(let o=0;o<2;o++){const h=r-o,x=(r+1&2)==0?this.size-1-a:a;!this.isFunction[x][h]&&t<s.length*8&&(this.modules[x][h]=c(s[t>>>3],7-(t&7)),t++)}}d(t==s.length*8)}applyMask(s){if(s<0||s>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let r=0;r<this.size;r++){let a;switch(s){case 0:a=(r+t)%2==0;break;case 1:a=t%2==0;break;case 2:a=r%3==0;break;case 3:a=(r+t)%3==0;break;case 4:a=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:a=r*t%2+r*t%3==0;break;case 6:a=(r*t%2+r*t%3)%2==0;break;case 7:a=((r+t)%2+r*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][r]&&a&&(this.modules[t][r]=!this.modules[t][r])}}getPenaltyScore(){let s=0;for(let o=0;o<this.size;o++){let h=!1,m=0,x=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[o][g]==h?(m++,m==5?s+=n.PENALTY_N1:m>5&&s++):(this.finderPenaltyAddHistory(m,x),h||(s+=this.finderPenaltyCountPatterns(x)*n.PENALTY_N3),h=this.modules[o][g],m=1);s+=this.finderPenaltyTerminateAndCount(h,m,x)*n.PENALTY_N3}for(let o=0;o<this.size;o++){let h=!1,m=0,x=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[g][o]==h?(m++,m==5?s+=n.PENALTY_N1:m>5&&s++):(this.finderPenaltyAddHistory(m,x),h||(s+=this.finderPenaltyCountPatterns(x)*n.PENALTY_N3),h=this.modules[g][o],m=1);s+=this.finderPenaltyTerminateAndCount(h,m,x)*n.PENALTY_N3}for(let o=0;o<this.size-1;o++)for(let h=0;h<this.size-1;h++){const m=this.modules[o][h];m==this.modules[o][h+1]&&m==this.modules[o+1][h]&&m==this.modules[o+1][h+1]&&(s+=n.PENALTY_N2)}let t=0;for(const o of this.modules)t=o.reduce((h,m)=>h+(m?1:0),t);const r=this.size*this.size,a=Math.ceil(Math.abs(t*20-r*10)/r)-1;return d(0<=a&&a<=9),s+=a*n.PENALTY_N4,d(0<=s&&s<=2568888),s}getAlignmentPatternPositions(){if(this.version==1)return[];{const s=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(s*2-2))*2;let r=[6];for(let a=this.size-7;r.length<s;a-=t)r.splice(1,0,a);return r}}static getNumRawDataModules(s){if(s<n.MIN_VERSION||s>n.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*s+128)*s+64;if(s>=2){const r=Math.floor(s/7)+2;t-=(25*r-10)*r-55,s>=7&&(t-=36)}return d(208<=t&&t<=29648),t}static getNumDataCodewords(s,t){return Math.floor(n.getNumRawDataModules(s)/8)-n.ECC_CODEWORDS_PER_BLOCK[t.ordinal][s]*n.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][s]}static reedSolomonComputeDivisor(s){if(s<1||s>255)throw new RangeError("Degree out of range");let t=[];for(let a=0;a<s-1;a++)t.push(0);t.push(1);let r=1;for(let a=0;a<s;a++){for(let o=0;o<t.length;o++)t[o]=n.reedSolomonMultiply(t[o],r),o+1<t.length&&(t[o]^=t[o+1]);r=n.reedSolomonMultiply(r,2)}return t}static reedSolomonComputeRemainder(s,t){let r=t.map(a=>0);for(const a of s){const o=a^r.shift();r.push(0),t.forEach((h,m)=>r[m]^=n.reedSolomonMultiply(h,o))}return r}static reedSolomonMultiply(s,t){if(s>>>8||t>>>8)throw new RangeError("Byte out of range");let r=0;for(let a=7;a>=0;a--)r=r<<1^(r>>>7)*285,r^=(t>>>a&1)*s;return d(r>>>8==0),r}finderPenaltyCountPatterns(s){const t=s[1];d(t<=this.size*3);const r=t>0&&s[2]==t&&s[3]==t*3&&s[4]==t&&s[5]==t;return(r&&s[0]>=t*4&&s[6]>=t?1:0)+(r&&s[6]>=t*4&&s[0]>=t?1:0)}finderPenaltyTerminateAndCount(s,t,r){return s&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(s,t){t[0]==0&&(s+=this.size),t.pop(),t.unshift(s)}};let u=n;u.MIN_VERSION=1,u.MAX_VERSION=40,u.PENALTY_N1=3,u.PENALTY_N2=3,u.PENALTY_N3=40,u.PENALTY_N4=10,u.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],u.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],l.QrCode=u;function i(s,t,r){if(t<0||t>31||s>>>t)throw new RangeError("Value out of range");for(let a=t-1;a>=0;a--)r.push(s>>>a&1)}function c(s,t){return(s>>>t&1)!=0}function d(s){if(!s)throw new Error("Assertion error")}const f=class{constructor(s,t,r){if(this.mode=s,this.numChars=t,this.bitData=r,t<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}static makeBytes(s){let t=[];for(const r of s)i(r,8,t);return new f(f.Mode.BYTE,s.length,t)}static makeNumeric(s){if(!f.isNumeric(s))throw new RangeError("String contains non-numeric characters");let t=[];for(let r=0;r<s.length;){const a=Math.min(s.length-r,3);i(parseInt(s.substr(r,a),10),a*3+1,t),r+=a}return new f(f.Mode.NUMERIC,s.length,t)}static makeAlphanumeric(s){if(!f.isAlphanumeric(s))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],r;for(r=0;r+2<=s.length;r+=2){let a=f.ALPHANUMERIC_CHARSET.indexOf(s.charAt(r))*45;a+=f.ALPHANUMERIC_CHARSET.indexOf(s.charAt(r+1)),i(a,11,t)}return r<s.length&&i(f.ALPHANUMERIC_CHARSET.indexOf(s.charAt(r)),6,t),new f(f.Mode.ALPHANUMERIC,s.length,t)}static makeSegments(s){return s==""?[]:f.isNumeric(s)?[f.makeNumeric(s)]:f.isAlphanumeric(s)?[f.makeAlphanumeric(s)]:[f.makeBytes(f.toUtf8ByteArray(s))]}static makeEci(s){let t=[];if(s<0)throw new RangeError("ECI assignment value out of range");if(s<128)i(s,8,t);else if(s<16384)i(2,2,t),i(s,14,t);else if(s<1e6)i(6,3,t),i(s,21,t);else throw new RangeError("ECI assignment value out of range");return new f(f.Mode.ECI,0,t)}static isNumeric(s){return f.NUMERIC_REGEX.test(s)}static isAlphanumeric(s){return f.ALPHANUMERIC_REGEX.test(s)}getData(){return this.bitData.slice()}static getTotalBits(s,t){let r=0;for(const a of s){const o=a.mode.numCharCountBits(t);if(a.numChars>=1<<o)return 1/0;r+=4+o+a.bitData.length}return r}static toUtf8ByteArray(s){s=encodeURI(s);let t=[];for(let r=0;r<s.length;r++)s.charAt(r)!="%"?t.push(s.charCodeAt(r)):(t.push(parseInt(s.substr(r+1,2),16)),r+=2);return t}};let w=f;w.NUMERIC_REGEX=/^[0-9]*$/,w.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,w.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",l.QrSegment=w})(P||(P={}));(l=>{(n=>{const u=class{constructor(c,d){this.ordinal=c,this.formatBits=d}};let i=u;i.LOW=new u(0,1),i.MEDIUM=new u(1,0),i.QUARTILE=new u(2,3),i.HIGH=new u(3,2),n.Ecc=i})(l.QrCode||(l.QrCode={}))})(P||(P={}));(l=>{(n=>{const u=class{constructor(c,d){this.modeBits=c,this.numBitsCharCount=d}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};let i=u;i.NUMERIC=new u(1,[10,12,14]),i.ALPHANUMERIC=new u(2,[9,11,13]),i.BYTE=new u(4,[8,16,16]),i.KANJI=new u(8,[8,10,12]),i.ECI=new u(7,[0,0,0]),n.Mode=i})(l.QrSegment||(l.QrSegment={}))})(P||(P={}));var R=P;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */R.QrCode.Ecc.LOW,R.QrCode.Ecc.MEDIUM,R.QrCode.Ecc.QUARTILE,R.QrCode.Ecc.HIGH;(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function je(){const{items:l,getCartTotal:n,clearCart:u}=_(),[i,c]=j.useState(null),[d,f]=j.useState([]),[w,s]=j.useState(!1),[t,r]=j.useState(!1),[a,o]=j.useState(!1),[h,m]=j.useState({utr:"",note:""}),[x,g]=j.useState({name:"",email:"",phone:"",address:""}),[E,v]=j.useState(!1),b=async p=>{var C,k;p.preventDefault(),s(!0);try{const A=await he({items:l,customer:x});c(A),f(l);try{localStorage.setItem("lastOrderId",A.orderId),localStorage.setItem("phonepe_order",JSON.stringify({orderId:A.orderId,items:l}))}catch{}const I=await(await fetch(`${O}/api/payment/phonepe/create-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:n()*100})})).json();if(!I.ok){console.error("PhonePe init failed details:",I.details||I);const B=((C=I.details)==null?void 0:C.message)||((k=I.details)==null?void 0:k.code)||I.error||"Failed to start payment";throw new Error(B)}window.location.href=I.data.checkoutPageUrl}catch(A){console.error("Error starting payment:",A),alert(`Failed to start payment: ${A.message}`)}finally{s(!1)}};return E&&i?e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("div",{className:"text-green-600 text-5xl mb-4",children:"âœ“"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your purchase! You can now download your notes."}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:["ðŸ“§ A confirmation email with download links has been sent to ",e.jsx("strong",{children:x.email})]})}),e.jsx("div",{className:"space-y-2 mb-6 text-left",children:d.map(p=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[p.title," (x",p.qty,")"]}),e.jsx("a",{href:`${O}/api/orders/${i.orderId}/download/${p.id}`,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md",children:"Download"})]},p.id))}),e.jsx("a",{href:"/shop",className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-6 py-3 rounded-lg font-medium",children:"Back to Shop"})]})}):i?e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Complete Your Payment"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:["ðŸ“§ Order confirmation has been sent to ",e.jsx("strong",{children:x.email})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Summary"}),e.jsx("div",{className:"space-y-2 mb-6",children:l.map(p=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[p.title," (x",p.qty,")"]}),e.jsxs("span",{children:["â‚¹",p.price*p.qty]})]},p.id))}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between text-lg font-medium",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["â‚¹",n()]})]})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Redirecting to PhonePe..."}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"If you are not redirected automatically, please check your pop-up settings and try again."})]})]})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Checkout"}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:p=>g({...x,name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),e.jsx("input",{type:"email",required:!0,value:x.email,onChange:p=>g({...x,email:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Order confirmation and payment details will be sent to this email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text.sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",required:!0,value:x.phone,onChange:p=>g({...x,phone:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),e.jsx("textarea",{required:!0,value:x.address,onChange:p=>g({...x,address:p.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between text-lg font-medium mb-4",children:[e.jsx("span",{children:"Total Amount"}),e.jsxs("span",{children:["â‚¹",n()]})]}),e.jsx("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white py-3 px-6 rounded-lg font-medium",children:w?"Processing...":"Proceed to Payment"})]})]})})]})}function be(){const[l,n]=j.useState({name:"",phone:"",email:"",course:"",message:""}),[u,i]=j.useState(null),[c,d]=j.useState(!1),[f,w]=j.useState(!1),s=async t=>{t.preventDefault(),d(!0);try{const r=new FormData;Object.entries(l).forEach(([a,o])=>{r.append(a,o)}),u&&r.append("doc",u),await xe(r),w(!0)}catch(r){console.error("Error submitting form:",r),alert("Failed to submit application. Please try again.")}finally{d(!1)}};return f?e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("div",{className:"text-green-600 text-5xl mb-4",children:"âœ“"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Application Submitted!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your application. We will contact you shortly."}),e.jsx("a",{href:"/",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:"Back to Home"})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Admission Application"}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",required:!0,value:l.name,onChange:t=>n({...l,name:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",required:!0,value:l.phone,onChange:t=>n({...l,phone:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),e.jsx("input",{type:"email",required:!0,value:l.email,onChange:t=>n({...l,email:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Interested In *"}),e.jsxs("select",{required:!0,value:l.course,onChange:t=>n({...l,course:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a course"}),e.jsx("option",{value:"class11",children:"Class 11 (Science)"}),e.jsx("option",{value:"class12",children:"Class 12 (Science)"}),e.jsx("option",{value:"neet",children:"NEET Preparation"}),e.jsx("option",{value:"jee",children:"JEE Preparation"}),e.jsx("option",{value:"foundation",children:"Foundation Course"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message (Optional)"}),e.jsx("textarea",{value:l.message,onChange:t=>n({...l,message:t.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Document (Optional)"}),e.jsx("input",{type:"file",onChange:t=>i(t.target.files[0]),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"You can upload your previous mark sheets or any relevant documents."})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white py-3 px-6 rounded-lg font-medium",children:c?"Submitting...":"Submit Application"})]})})]})}const $=()=>{const l=J();j.useEffect(()=>{localStorage.removeItem("cart")},[]);const n=()=>{l("/shop")},u=()=>{l("/")};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600",children:"Thank you for your purchase. Your order has been confirmed and you will receive an email confirmation shortly."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:n,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition duration-200",children:"Continue Shopping"}),e.jsx("button",{onClick:u,className:"w-full bg-gray-200 text-gray-800 py-3 px-4 rounded-lg hover:bg-gray-300 transition duration-200",children:"Go to Home"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Need help? Contact our support team at"," ",e.jsx("a",{href:"mailto:support@example.com",className:"text-blue-600 hover:underline",children:"support@example.com"})]})})]})})};function Q(){return e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-16",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[e.jsx("div",{className:"text-red-600 text-6xl mb-4",children:"âœ•"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Unfortunately, your payment could not be completed. You can try again from checkout."}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(S,{to:"/cart",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg",children:"Go to Cart"}),e.jsx(S,{to:"/shop",className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-6 py-3 rounded-lg",children:"Continue Browsing"})]})]})})}function Ne(){const[l]=H(),n=J(),[u,i]=j.useState("checking"),[c,d]=j.useState(null),f=()=>{try{const a=localStorage.getItem("phonepe_order");if(a){const o=JSON.parse(a);if(console.log("Stored order data:",o),o.items&&Array.isArray(o.items)&&o.items.length>0)return console.log("Found items array:",o.items),o.items;if(o.items&&typeof o.items=="object"){const h=Object.values(o.items);return console.log("Converted items object to array:",h),h}else if(o.cartItems){const h=Array.isArray(o.cartItems)?o.cartItems:Object.values(o.cartItems||{});return console.log("Using cartItems fallback:",h),h}else console.log("Order data structure:",Object.keys(o))}else console.warn("No phonepe_order found in localStorage")}catch(a){console.error("Error getting stored order items:",a)}return console.warn("No valid order items found in storage"),[]},w=async a=>{var o;try{const h=localStorage.getItem("phonepe_order");if(!h){alert("Order information not found. Please contact support.");return}const m=JSON.parse(h),x=l.get("merchantOrderId")||m.merchantOrderId||(c==null?void 0:c.merchantOrderId);if(console.log("Attempting download:",{merchantOrderId:x,itemId:a}),!x){alert("Order ID not found. Please contact support.");return}const g=await fetch(`https://demo-payment-lhgtiuet8-subhankar-rout.vercel.app/api/payment/phonepe/download/${x}/${a}`);if(!g.ok){const p=await g.json().catch(()=>({error:"Download failed"}));console.error("Download failed:",p),alert(`Download failed: ${p.error||"Unknown error"}`);return}const E=await g.blob(),v=window.URL.createObjectURL(E),b=document.createElement("a");b.href=v,b.download=`${((o=m.items.find(p=>p.id===a))==null?void 0:o.title)||"download"}.pdf`,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(v)}catch(h){console.error("Download error:",h),alert("Failed to download file. Please try again or contact support.")}};j.useEffect(()=>{const a=l.get("merchantOrderId");if(!a){i("error");return}s(a)},[l]);const s=async a=>{try{const o=await q.get(`https://demo-payment-lhgtiuet8-subhankar-rout.vercel.app/api/payment/phonepe/check-status?merchantOrderId=${a}`);if(o.data.ok){const h=o.data.data.status;d(o.data.data),i(h==="COMPLETED"?"success":h==="FAILED"?"failed":"pending")}else i("error")}catch(o){console.error("Error checking payment status:",o),i("error")}},t=()=>{n("/")},r=()=>{switch(u){case"checking":return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Checking Payment Status..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we verify your payment."})]});case"success":return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-xl font-semibold text-green-600 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your payment has been processed successfully."}),c&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",c.merchantOrderId]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Download Your Files"}),e.jsx("div",{className:"space-y-2",children:f().map(a=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["â‚¹",a.price]})]}),e.jsx("button",{onClick:()=>w(a.id),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",children:"Download PDF"})]},a.id))})]})]});case"failed":return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your payment could not be processed. Please try again."}),c&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",c.merchantOrderId]})})]});case"pending":return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-yellow-600 mb-2",children:"Payment Pending"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your payment is being processed. Please wait."}),c&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID: ",c.merchantOrderId]})})]});case"error":default:return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to check payment status. Please contact support."})]})}};return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-6",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center w-96",children:[r(),e.jsx("button",{onClick:t,className:"w-full mt-6 bg-purple-600 text-white p-2 rounded hover:bg-purple-700",children:"Return to Home"})]})})}const D="https://server-c334c62ax-subhankar-rout.vercel.app";function we(){const[l,n]=j.useState(""),[u,i]=j.useState(""),[c,d]=j.useState(""),[f,w]=j.useState(0),[s,t]=j.useState(""),[r,a]=j.useState(null),[o,h]=j.useState(null),[m,x]=j.useState(!1),[g,E]=j.useState([]),[v,b]=j.useState([]),[p,C]=j.useState(!1),k=async y=>{y.preventDefault(),x(!0);try{const M=await(await fetch(`${D}/api/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:l})})).json();if(!M.ok)throw new Error(M.error||"Login failed");i(M.data.token),A(M.data.token),T(M.data.token)}catch(N){alert(N.message)}finally{x(!1)}},A=async(y=u)=>{try{const M=await(await fetch(`${D}/api/admin/books`,{headers:{Authorization:`Bearer ${y}`}})).json();M.ok&&E(M.data)}catch(N){console.error("Failed to fetch books:",N)}},T=async(y=u)=>{try{const M=await(await fetch(`${D}/api/admin/categories`,{headers:{Authorization:`Bearer ${y}`}})).json();M.ok&&b(M.data)}catch(N){console.error("Failed to fetch categories:",N)}},I=async y=>{if(y.preventDefault(),!u)return alert("Please login first");if(!r)return alert("Please choose a PDF file");x(!0);try{const N=new FormData;N.append("file",r),o&&N.append("cover",o),N.append("title",c||"Untitled"),N.append("price",String(f||0)),N.append("category",s||"");const U=await(await fetch(`${D}/api/admin/upload`,{method:"POST",headers:{Authorization:`Bearer ${u}`},body:N})).json();if(!U.ok)throw new Error(U.error||"Upload failed");alert("Uploaded successfully"),d(""),w(0),t(""),a(null),h(null),A(),T()}catch(N){alert(N.message)}finally{x(!1)}},B=async y=>{if(confirm("Are you sure you want to delete this book?"))try{const M=await(await fetch(`${D}/api/admin/books/${y}`,{method:"DELETE",headers:{Authorization:`Bearer ${u}`}})).json();if(!M.ok)throw new Error(M.error||"Delete failed");alert("Book deleted successfully"),A(),T()}catch(N){alert(N.message)}};return e.jsxs("div",{className:"max-w-xl mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Admin"}),u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex space-x-4 border-b",children:[e.jsx("button",{onClick:()=>C(!1),className:`pb-2 px-1 ${p?"text-gray-500":"border-b-2 border-blue-500 text-blue-600"}`,children:"Upload New Book"}),e.jsxs("button",{onClick:()=>C(!0),className:`pb-2 px-1 ${p?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"}`,children:["Manage Books (",g.length,")"]})]}),p?e.jsx("div",{className:"bg-white rounded-md shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Uploaded Books"}),g.length===0?e.jsx("p",{className:"text-gray-500",children:"No books uploaded yet."}):e.jsx("div",{className:"space-y-4",children:g.map(y=>e.jsxs("div",{className:"border rounded-lg p-4 flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[y.cover&&e.jsx("img",{src:`${D}/${y.cover}`,alt:y.title,className:"w-16 h-20 object-cover rounded border"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:y.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Price: â‚¹",y.price]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Category: ",y.category||"Uncategorized"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created:"," ",new Date(y.createdAt).toLocaleDateString()]}),y.cover&&e.jsx("p",{className:"text-xs text-green-600",children:"âœ“ Has cover image"})]})]}),e.jsx("button",{onClick:()=>B(y.id),className:"ml-4 bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"Delete"})]},y.id))})]})}):e.jsxs("form",{onSubmit:I,className:"space-y-4 bg-white p-6 rounded-md shadow",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (â‚¹)"}),e.jsx("input",{type:"number",step:"1",min:"0",value:f,onChange:y=>w(Number(y.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:s,onChange:y=>t(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select or enter new category"}),v.map(y=>e.jsx("option",{value:y,children:y},y))]}),e.jsx("input",{type:"text",placeholder:"Or enter new category",value:s,onChange:y=>t(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),v.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Existing categories:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:v.map(y=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:y},y))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cover Image (Optional)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:y=>{var N;return h(((N=y.target.files)==null?void 0:N[0])||null)},className:"w-full mb-2"}),o&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:URL.createObjectURL(o),alt:"Cover preview",className:"w-32 h-40 object-cover rounded border"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PDF File"}),e.jsx("input",{type:"file",accept:"application/pdf",onChange:y=>{var N;return a(((N=y.target.files)==null?void 0:N[0])||null)},className:"w-full",required:!0})]})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white py-2 rounded-md",children:m?"Uploading...":"Upload Book"})]})]}):e.jsxs("form",{onSubmit:k,className:"space-y-4 bg-white p-6 rounded-md shadow",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:l,onChange:y=>n(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white py-2 rounded-md",children:m?"Logging in...":"Login"})]})]})}function ve(){const[l,n]=j.useState(1e3),[u,i]=j.useState(!1),c=async()=>{try{i(!0);const d=await q.post("https://demo-payment-lhgtiuet8-subhankar-rout.vercel.app/api/payment/phonepe/create-order",{amount:l});d.data.ok?window.location.href=d.data.data.checkoutPageUrl:alert("Failed to create order: "+d.data.error)}catch(d){console.error("Error creating order:",d),alert("Error creating order. Please try again.")}finally{i(!1)}};return e.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 p-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center w-96",children:[e.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8yIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMzIgNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6IzVmMjU5Zn08L3N0eWxlPjxjaXJjbGUgdHJhbnNmb3JtPSJyb3RhdGUoLTc2LjcxNCAxNy44NyAyNC4wMDEpIiBjbGFzcz0ic3QwIiBjeD0iMTcuOSIgY3k9IjI0IiByPSIxNy45Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkwLjUgMzQuMnYtNi41YzAtMS42LS42LTIuNC0yLjEtMi40LS42IDAtMS4zLjEtMS43LjJWMzVjMCAuMy0uMy42LS42LjZoLTIuM2MtLjMgMC0uNi0uMy0uNi0uNlYyMy45YzAtLjQuMy0uNy42LS44IDEuNS0uNSAzLS44IDQuNi0uOCAzLjYgMCA1LjYgMS45IDUuNiA1LjR2Ny40YzAgLjMtLjMuNi0uNi42SDkyYy0uOSAwLTEuNS0uNy0xLjUtMS41em05LTMuOWwtLjEuOWMwIDEuMi44IDEuOSAyLjEgMS45IDEgMCAxLjktLjMgMi45LS44LjEgMCAuMi0uMS4zLS4xLjIgMCAuMy4xLjQuMi4xLjEuMy40LjMuNC4yLjMuNC43LjQgMSAwIC41LS4zIDEtLjcgMS4yLTEuMS42LTIuNC45LTMuOC45LTEuNiAwLTIuOS0uNC0zLjktMS4yLTEtLjktMS42LTIuMS0xLjYtMy42di0zLjljMC0zLjEgMi01IDUuNC01IDMuMyAwIDUuMiAxLjggNS4yIDV2Mi40YzAgLjMtLjMuNi0uNi42aC02LjN6bS0uMS0yLjJIMTAzLjJ2LTFjMC0xLjItLjctMi0xLjktMnMtMS45LjctMS45IDJ2MXptMjUuNSAyLjJsLS4xLjljMCAxLjIuOCAxLjkgMi4xIDEuOSAxIDAgMS45LS4zIDIuOS0uOC4xIDAgLjItLjEuMy0uMS4yIDAgLjMuMS40LjIuMS4xLjMuNC4zLjQuMi4zLjQuNy40IDEgMCAuNS0uMyAxLS43IDEuMi0xLjEuNi0yLjQuOS0zLjguOS0xLjYgMC0yLjktLjQtMy45LTEuMi0xLS45LTEuNi0yLjEtMS42LTMuNnYtMy45YzAtMy4xIDItNSA1LjQtNSAzLjMgMCA1LjIgMS44IDUuMiA1djIuNGMwIC4zLS4zLjYtLjYuNmgtNi4zem0tLjEtMi4ySDEyOC42di0xYzAtMS4yLS43LTItMS45LTJzLTEuOS43LTEuOSAydjF6TTY2IDM1LjdoMS40Yy4zIDAgLjYtLjMuNi0uNnYtNy40YzAtMy40LTEuOC01LjQtNC44LTUuNC0uOSAwLTEuOS4yLTIuNS40VjE5YzAtLjgtLjctMS41LTEuNS0xLjVoLTEuNGMtLjMgMC0uNi4zLS42LjZ2MTdjMCAuMy4zLjYuNi42aDIuM2MuMyAwIC42LS4zLjYtLjZ2LTkuNGMuNS0uMiAxLjItLjMgMS43LS4zIDEuNSAwIDIuMS43IDIuMSAyLjR2Ni41Yy4xLjcuNyAxLjQgMS41IDEuNHptMTUuMS04LjRWMzFjMCAzLjEtMi4xIDUtNS42IDUtMy40IDAtNS42LTEuOS01LjYtNXYtMy43YzAtMy4xIDIuMS01IDUuNi01IDMuNSAwIDUuNiAxLjkgNS42IDV6bS0zLjUgMGMwLTEuMi0uNy0yLTItMnMtMiAuNy0yIDJWMzFjMCAxLjIuNyAxLjkgMiAxLjlzMi0uNyAyLTEuOXYtMy43em0tMjIuMy0xLjdjMCAzLjItMi40IDUuNC01LjYgNS40cy01LjYtMi4yLTUuNi01LjR2LTMuN2MwLTMuMiAyLjQtNS40IDUuNi01LjRzNS42IDIuMiA1LjYgNS40djMuN3ptLTMuNS0zLjdjMC0xLjItLjctMi0yLTJzLTIgLjgtMiAyVjMxYzAgMS4yLjcgMiAyIDJzMi0uOCAyLTJ2LTMuN3oiLz48L3N2Zz4=",alt:"PhonePe",className:"h-12 mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-bold mb-4",children:"PhonePe Payment Gateway"}),e.jsx("input",{type:"number",className:"border p-2 w-full mb-4 rounded",placeholder:"Enter amount",value:l/100,onChange:d=>n(d.target.value*100)}),e.jsx("button",{onClick:c,disabled:u,className:`w-full p-2 rounded text-white ${u?"bg-gray-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:u?"Processing...":"Pay Now"})]})})}function Me(){return e.jsx(ce,{children:e.jsx(K,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(de,{}),e.jsxs(ee,{children:[e.jsx(L,{path:"/",element:e.jsx(ue,{})}),e.jsx(L,{path:"/shop",element:e.jsx(fe,{})}),e.jsx(L,{path:"/cart",element:e.jsx(ye,{})}),e.jsx(L,{path:"/checkout",element:e.jsx(je,{})}),e.jsx(L,{path:"/admission",element:e.jsx(be,{})}),e.jsx(L,{path:"/payment-success",element:e.jsx($,{})}),e.jsx(L,{path:"/payment-failure",element:e.jsx(Q,{})}),e.jsx(L,{path:"/success",element:e.jsx($,{})}),e.jsx(L,{path:"/failure",element:e.jsx(Q,{})}),e.jsx(L,{path:"/payment/check-status",element:e.jsx(Ne,{})}),e.jsx(L,{path:"/phonepe-payment",element:e.jsx(ve,{})}),e.jsx(L,{path:"/admin",element:e.jsx(we,{})})]})]})})})}X(document.getElementById("root")).render(e.jsx(te.StrictMode,{children:e.jsx(Me,{})}));
